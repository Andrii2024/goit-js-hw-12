{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Додатковий імпорт стилів\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  captionsData: 'alt',\n  captions: true,\n});\n\nlet searchQuery = '';\nlet page = 1;\nconst limit = 40;\n\nform.addEventListener('submit', onSabmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nfunction onSabmit(e) {\n  e.preventDefault();\n  searchQuery = e.target.elements.search.value.trim();\n  if (searchQuery) {\n    clearGallery();\n    showLoader();\n    page = 1;\n    searchImages(searchQuery, page);\n  }\n  e.target.reset();\n}\n\nasync function searchImages(q, page) {\n  const API_KEY = '42003708-c000c9a8ce48958e4d2fbd571';\n  const BAS_EURL = 'https://pixabay.com/api';\n\n  try {\n    const response = await axios.get(BAS_EURL, {\n      params: {\n        key: API_KEY,\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: limit,\n      },\n    });\n    hideLoader();\n    if (response.data.hits.length > 0) {\n      displayImages(response.data.hits);\n    } else {\n      showNoResultsMessage();\n    }\n\n    const totalPages = Math.ceil(response.data.totalHits / limit);\n    if (page >= totalPages) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        position: 'topRight',\n        color: 'green',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    hideLoader();\n    showErrorMessage();\n  }\n}\n// ==================================================\n//    Обмежена кількість карток додавання до галереї\n// ==================================================\nfunction displayImages(images) {\n  const fragment = document.createDocumentFragment();\n\n  images.forEach(image => {\n    const card = createImageCard(image);\n    fragment.appendChild(card);\n  });\n\n  gallery.appendChild(fragment);\n  lightbox.refresh();\n}\n\nfunction loadMoreImages() {\n  showLoader();\n  page += 1;\n  const cardHeight = getCardHeight();\n  searchImages(searchQuery, page);\n  scrollCard(cardHeight * 2);\n}\n// ===============SCROLL==============\nfunction scrollCard(distance) {\n  window.scrollBy({\n    top: distance,\n    behavior: 'smooth',\n  });\n}\n\nfunction getCardHeight() {\n  const card = document.querySelector('.card');\n  const cardRect = card.getBoundingClientRect();\n  return cardRect.height;\n}\n\n// ===============================\n//    Створення картки з описом\n// ===============================\nfunction createImageCard(image) {\n  const card = document.createElement('div');\n  card.classList.add('card');\n\n  const link = document.createElement('a');\n  link.classList.add('gallery-link');\n  link.href = image.largeImageURL;\n\n  const img = document.createElement('img');\n  img.classList.add('img-pixaby');\n  img.src = image.webformatURL;\n  img.alt = image.tags;\n\n  const listCom = document.createElement('ul');\n  listCom.classList.add('comments');\n\n  const likesItem = document.createElement('li');\n  likesItem.classList.add('list-item-com');\n  likesItem.textContent = `Likes: ${image.likes}`;\n  listCom.appendChild(likesItem);\n\n  const viewsItem = document.createElement('li');\n  viewsItem.classList.add('list-item-com');\n  viewsItem.textContent = `Views: ${image.views}`;\n  listCom.appendChild(viewsItem);\n\n  const commentsItem = document.createElement('li');\n  commentsItem.classList.add('list-item-com');\n  commentsItem.textContent = `Comments: ${image.comments}`;\n  listCom.appendChild(commentsItem);\n\n  const downloadsItem = document.createElement('li');\n  downloadsItem.classList.add('list-item-com');\n  downloadsItem.textContent = `Downloads: ${image.downloads}`;\n  listCom.appendChild(downloadsItem);\n\n  link.appendChild(img);\n  card.appendChild(listCom);\n  card.appendChild(link);\n\n  return card;\n}\n//\n//\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction showNoResultsMessage() {\n  iziToast.info({\n    title: 'Info',\n    position: 'topRight',\n    color: 'green',\n    message:\n      'Sorry, there are no images matching your search query. Please try again.',\n  });\n}\n\nfunction showErrorMessage() {\n  iziToast.error({\n    title: 'Error',\n    position: 'topRight',\n    color: 'red',\n    message: 'Something went wrong. Please try again later.',\n  });\n}\n"],"names":["form","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","searchQuery","page","limit","onSabmit","loadMoreImages","e","clearGallery","showLoader","searchImages","q","API_KEY","BAS_EURL","response","axios","hideLoader","displayImages","showNoResultsMessage","totalPages","iziToast","error","showErrorMessage","images","fragment","image","card","createImageCard","cardHeight","getCardHeight","scrollCard","distance","link","img","listCom","likesItem","viewsItem","commentsItem","downloadsItem"],"mappings":"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"}