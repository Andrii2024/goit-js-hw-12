{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Додатковий імпорт стилів\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  captionsData: 'alt',\n  captions: true,\n});\n\nlet searchQuery = '';\nlet page = 1;\nconst limit = 40;\n\nform.addEventListener('submit', onSubmit);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  searchQuery = e.target.elements.search.value.trim();\n  if (searchQuery) {\n    clearGallery();\n    showLoader();\n    page = 1;\n    searchImages(searchQuery, page);\n  }\n  e.target.reset();\n}\n\nconst API_KEY = '42003708-c000c9a8ce48958e4d2fbd571';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nasync function searchImages(q, page) {\n  const searchParams = {\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: limit,\n  };\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: searchParams,\n    });\n    hideLoader();\n    if (response.data.hits.length > 0) {\n      displayImages(response.data.hits);\n    } else {\n      showNoResultsMessage();\n    }\n\n    loadMoreBtn.addEventListener('click', loadMoreImages);\n\n    const totalPages = Math.ceil(response.data.totalHits / limit);\n    if (page >= totalPages) {\n      loadMoreBtn.style.display = 'none';\n      // iziToast.info({\n      //   title: 'Info',\n      //   position: 'topRight',\n      //   color: 'green',\n      //   message: \"We're sorry, but you've reached the end of search results.\",\n      // });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    hideLoader();\n    showErrorMessage();\n  }\n}\nfunction loadMoreImages() {\n  showLoader();\n  page += 1;\n  searchImages(searchQuery, page);\n  scrollToCardHeight();\n}\nfunction scrollToCardHeight() {\n  const elem = document.querySelector('.card');\n  if (elem) {\n    const rect = elem.getBoundingClientRect();\n    rect.height = rect.height * 2;\n    window.scrollBy({\n      top: rect.height,\n      behavior: 'smooth',\n    });\n  }\n}\n// ==================================================\n//    Обмежена кількість карток додавання до галереї\n// ==================================================\nfunction displayImages(images) {\n  const fragment = document.createDocumentFragment();\n\n  images.forEach(image => {\n    const card = createImageCard(image);\n    fragment.appendChild(card);\n  });\n\n  gallery.appendChild(fragment);\n  lightbox.refresh();\n  // scroll();\n}\n\n// ===============SCROLL==============\n\n// function scroll() {\n//   const galleryHeight = document\n//     .querySelector('.card')\n//     .getBoundingClientRect().height;\n//   const total = galleryHeight * 2;\n//   window.scrollBy({\n//     top: total,\n//     behavior: 'smooth',\n//   });\n// }\n// ===============================\n//    Створення картки з описом\n// ===============================\nfunction createImageCard(image) {\n  const card = document.createElement('div');\n  card.classList.add('card');\n\n  const link = document.createElement('a');\n  link.classList.add('gallery-link');\n  link.href = image.largeImageURL;\n\n  const img = document.createElement('img');\n  img.classList.add('img-pixaby');\n  img.src = image.webformatURL;\n  img.alt = image.tags;\n\n  const listCom = document.createElement('ul');\n  listCom.classList.add('comments');\n\n  const likesItem = document.createElement('li');\n  likesItem.classList.add('list-item-com');\n  likesItem.textContent = `Likes: ${image.likes}`;\n  listCom.appendChild(likesItem);\n\n  const viewsItem = document.createElement('li');\n  viewsItem.classList.add('list-item-com');\n  viewsItem.textContent = `Views: ${image.views}`;\n  listCom.appendChild(viewsItem);\n\n  const commentsItem = document.createElement('li');\n  commentsItem.classList.add('list-item-com');\n  commentsItem.textContent = `Comments: ${image.comments}`;\n  listCom.appendChild(commentsItem);\n\n  const downloadsItem = document.createElement('li');\n  downloadsItem.classList.add('list-item-com');\n  downloadsItem.textContent = `Downloads: ${image.downloads}`;\n  listCom.appendChild(downloadsItem);\n\n  link.appendChild(img);\n  card.appendChild(listCom);\n  card.appendChild(link);\n\n  return card;\n}\n//\n//\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction showNoResultsMessage() {\n  iziToast.info({\n    title: 'Info',\n    position: 'topRight',\n    color: 'green',\n    message:\n      'Sorry, there are no images matching your search query. Please try again.',\n  });\n}\n\nfunction showErrorMessage() {\n  iziToast.error({\n    title: 'Error',\n    position: 'topRight',\n    color: 'red',\n    message: 'Something went wrong. Please try again later.',\n  });\n}\n"],"names":["form","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","searchQuery","page","limit","onSubmit","e","clearGallery","showLoader","searchImages","API_KEY","BASE_URL","q","searchParams","response","axios","hideLoader","displayImages","showNoResultsMessage","loadMoreImages","totalPages","error","showErrorMessage","scrollToCardHeight","elem","rect","images","fragment","image","card","createImageCard","link","img","listCom","likesItem","viewsItem","commentsItem","downloadsItem","iziToast"],"mappings":"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"}